
<html>
<head>
</head>
<body>

<div id="container"> </div>
<script src="jquery-2.1.1.js"></script>
<style> .el{
  position: absolute;
}
</style>
<script>




var elements = [];
elements.push({id : "A",id_father : "" , top: 50, left: 100, longueurX: 10, largueurY: 10})
elements.push({id : "B",id_father : "A", top: 150, left: 300,longueurX: 10, largueurY: 10})
elements.push({id : "C",id_father : "A", top: 90, left: 120, longueurX: 10, largueurY: 10})
elements.push({id : "D",id_father : "A", top: 500, left: 80, longueurX: 10, largueurY: 10})
elements.push({id : "E",id_father : "C", top: 500, left: 80, longueurX: 10, largueurY: 10})

var TabChild = [];

var espaceTop = 10;
var espaceLeft = 10;
var espace
var espaceTopFi =0;
var espaceLeftFi=0;

var nbrchild=0;
var DeltaX =0;
var api ={
  render : function(elements)
{
  elements.forEach(function(el)
  {
    var html = "<div class='el' style='top:"+el.top+"px;left:"+el.left+"px;width:"+el.longueurX+"; height:"+el.largueurY+";background:red'><small>"+el.id+"</small></div>";
    $('#container').append(html)
  });
},
  GetNbrElements : function(tableau)
    {
  // if(this.elements == null)
  //   return 0;
  //   else
      return tableau.length;
    },

  GetElement : function(i,tableau)
  {
  return tableau[i];
  }
 ,

 GetFirstChild : function(tableau)
 {
  return this.GetElement(0, tableau);
  }
 ,

 GetLastChild : function(tableau)
 {
   return this.GetElement( (this.GetNbrElements(tableau) - 1), tableau);
 },

 // GetFirstParent : function(tableau)
 // {
 //   for ( i in elements)
 //   {
 //  if (elements[i].id_father == "" )
 //  {
 //     return this.GetElement(i, tableau);
 //   }
 //   else {
 //     return null
 //   }
 // }
 // },
 GetSibling : function(father)
 {
   TabChild = [];
   for ( i in elements)
   {
     if ( elements[i].id_father == this.GetElement(father, elements).id ){

       TabChild.push(elements[i])
     }
   }
   return TabChild;
 }
,
GetEspaceTop : function(tableau)
{
  var Etop = 0;
  for ( var l = 0; l < tableau.length ; l++)
  {
    if ( tableau[l].largueurY > Etop)
    {
      Etop = tableau[l].largueurY;
    }

  }

  espaceTopFi = espaceTop + Etop;

},
GetEspaceLeft : function(tableau)
{
  var Eleft = 0;
  for ( var l = 0; l < tableau.length ; l++)
  {
    if ( tableau[l].longueurX > Eleft)
    {
      Eleft = tableau[l].longueurX;
    }

  }

  espaceLeftFi = espaceLeft + Eleft;

},
  alignH : function(elements){
for ( var t = 0; t < elements.length ; t++)
{
api.GetSibling(t);
if ( TabChild.length > 0 )
{
espace = ( this.GetFirstChild(TabChild).longueurX + this.GetLastChild(TabChild).longueurX ) / 2;
console.log(espace)
for ( var a = 1; a < TabChild.length - 1 ; a++ )
{
espace = espace + TabChild[a].longueurX;
}

}

nbrchild = this.GetNbrElements(TabChild);
DeltaX = (( nbrchild - 1) * espaceLeft )/2 + espace

for ( var i = 0; i < elements.length ; i++)
{
for ( j in TabChild ){
      if (elements[i].id == TabChild[j].id)
      {
        TabChild[0].left = (this.GetElement(t, elements).left - DeltaX)
          if ( j >= 1)
          {
            TabChild[j].left = TabChild[(j-1)].left + ( TabChild[(j-1)].longueurX / 2 ) + ( TabChild[(j)].longueurX / 2 ) + espaceLeft;
          }
        elements[i].top =  this.GetElement(t, elements).top + espaceTop ;
        elements[i].left = TabChild[j].left;
      }
}
}
}

    return elements;

  }
}

</script>
</body>
</html>

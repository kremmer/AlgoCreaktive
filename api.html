<script src="jquery-2.1.1.js"></script>
<script>

var elements = [];
elements.push({id : "A",id_father : "" , top: 5, left: 10})
elements.push({id : "B",id_father : "A", top: 15, left: 30})
elements.push({id : "C",id_father : "B", top: 9, left: 12})
elements.push({id : "D",id_father : "B", top: 50, left: 8})
elements.push({id : "E",id_father : "C", top: 50, left: 8})

var TabChild = [];
var Father = [];
var espaceTop = 10;
var espaceLeft = 10;
var nbrchild=0;
var DeltaX =0;
var api ={

  GetNbrElements : function(element)
    {
  // if(this.elements == null)
  //   return 0;
  //   else
      return element.length;
    },

  GetElement : function(i,element)
  {
  return element[i];
  }
 ,

 GetFirstChild : function(element)
 {
  return this.GetElement(0, element);
  }
 ,

 GetLastChild : function(element)
 {
   return this.GetElement( (this.GetNbrElements(element) - 1), element);
 },

 GetFirstParent : function(element)
 {
   for ( i in elements)
   {
  if (elements[i].id_father == "" )
  {
     return this.GetElement(i, element);
   }
   else {
     return null
   }
 }
 },
 GetFather : function (i)
 {
   return this.GetElement(i, elements);

 },
 GetSibling : function(i)
 {
   Father = [];
   TabChild = [];
   Father.push(this.GetFather(i).id);

   for ( i in elements)
   {
     if ( elements[i].id_father == Father[0] ){

       TabChild.push(elements[i])
     }
   }
   return TabChild;
 }
,

  alignH : function(elements){
for ( var t = 0; t < elements.length ; t++)
{

api.GetSibling(t);
nbrchild = this.GetNbrElements(TabChild);

DeltaX = (( nbrchild - 1) * espaceLeft )/2
for ( var i = 0; i < elements.length ; i++)
{

for ( j in TabChild ){
      if (elements[i].id == TabChild[j].id)
      {
        TabChild[0].left = (this.GetFather(t).left - DeltaX)
          if ( j >= 1)
          {
            TabChild[j].left = TabChild[(j-1)].left + espaceLeft;
          }
        elements[i].top =  this.GetFather(t).top + espaceTop;
        elements[i].left = TabChild[j].left;
      }
}
}
}
    return elements;

  }
}










</script>

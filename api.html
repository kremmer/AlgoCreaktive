<script src="jquery-2.1.1.js"></script>
<script>

var elements = [];
elements.push({id : "A",id_father : "" , top: 5, left: 10, longueur: 10, largueur: 10})
elements.push({id : "B",id_father : "A", top: 15, left: 30,longueur: 15, largueur: 20})
elements.push({id : "C",id_father : "A", top: 9, left: 12, longueur: 15, largueur: 5})
elements.push({id : "D",id_father : "A", top: 50, left: 8, longueur: 8, largueur: 25})
elements.push({id : "E",id_father : "C", top: 50, left: 8, longueur: 5, largueur: 10})

var TabChild = [];
var Father = [];

var espaceTop = 10;
var espaceLeft = 10;

var espaceTopFi = 0;
var espaceLeftFi=0;

var nbrchild=0;
var DeltaX =0;
var api ={

  GetNbrElements : function(element)
    {
  // if(this.elements == null)
  //   return 0;
  //   else
      return element.length;
    },

  GetElement : function(i,element)
  {
  return element[i];
  }
 ,

 GetFirstChild : function(element)
 {
  return this.GetElement(0, element);
  }
 ,

 GetLastChild : function(element)
 {
   return this.GetElement( (this.GetNbrElements(element) - 1), element);
 },

 GetFirstParent : function(element)
 {
   for ( i in elements)
   {
  if (elements[i].id_father == "" )
  {
     return this.GetElement(i, element);
   }
   else {
     return null
   }
 }
 },
 GetFather : function (i)
 {
   return this.GetElement(i, elements);

 },
 GetSibling : function(i)
 {
   Father = [];
   TabChild = [];
   Father.push(this.GetFather(i).id);

   for ( i in elements)
   {
     if ( elements[i].id_father == Father[0] ){

       TabChild.push(elements[i])
     }
   }
   return TabChild;
 }
,
GetEspaceTop : function(element)
{
  var Etop = 0;
  for ( var l = 0; l < element.length ; l++)
  {
    if ( element[l].longueur > Etop)
    {
      Etop = element[l].longueur;
    }

  }

  espaceTopFi = espaceTop + Etop;

},
GetEspaceLeft : function(element)
{
  var Eleft = 0;
  for ( var l = 0; l < element.length ; l++)
  {
    if ( element[l].largueur > Eleft)
    {
      Eleft = element[l].largueur;
    }

  }

  espaceLeftFi = espaceLeft + Eleft;

},

  alignH : function(elements){
for ( var t = 0; t < elements.length ; t++)
{
api.GetSibling(t);
api.GetEspaceLeft(TabChild);
api.GetEspaceTop(TabChild);

nbrchild = this.GetNbrElements(TabChild);
DeltaX = (( nbrchild - 1) * espaceLeftFi )/2

for ( var i = 0; i < elements.length ; i++)
{
for ( j in TabChild ){
      if (elements[i].id == TabChild[j].id)
      {
        TabChild[0].left = (this.GetFather(t).left - DeltaX)
          if ( j >= 1)
          {
            TabChild[j].left = TabChild[(j-1)].left + espaceLeftFi;
          }
        elements[i].top =  this.GetFather(t).top + espaceTopFi ;
        elements[i].left = TabChild[j].left;
      }
}
}
}
    return elements;

  }
}










</script>


<html>
<head>
</head>
<body>

  <div id="container"> </div>
  <script src="jquery-2.1.1.js"></script>
  <style> .el{
    position: absolute;
  }
  </style>
  <script>


  var elements = [];
  elements.push({id : "A",id_father : "" , top: 50, left: 100})
  elements.push({id : "B",id_father : "A", top: 150, left: 300})
  elements.push({id : "C",id_father : "A", top: 90, left: 120})
  elements.push({id : "D",id_father : "B", top: 500, left: 80})
  elements.push({id : "E",id_father : "C", top: 500, left: 80})



  var lib ={

render : function(tableau, color)
  {
    elements.forEach(function(el)
  {
<<<<<<< Updated upstream
    var html = "<div id='"+el.id+"' class='el' style='top:"+el.top+"px;left:"+el.left+"px;width: 10; height:10;background:"+color+"'><small>"+el.id+"</small></div>";
=======
    var html = "<div id='"+el.id+"' class='el' style='top:"+el.top+"px;left:"+el.left+"px;width: 20; height:20;background:"+color+"'></div>";
>>>>>>> Stashed changes
    $('#container').append(html)
  });
}
,
GetFather : function(father)
{
  for ( i in elements)
  {
    if ( elements[i].id == father ){

      return elements[i];
    }
  }
}
,
GetLastChild : function()
{
  return TabChild[(TabChild.length - 1)];
},

GetChilds : function(father)
{
  TabChild = [];
  for ( i in elements)
  {
    if ( elements[i].id_father == father ){

      TabChild.push(elements[i])
    }
  }
  return TabChild;
}
,

GetDeltaXH : function(espaceLeftH)
{
  var espace=0;
  nbrchild = TabChild.length;
  if ( TabChild.length > 0 )
  {
    espace = ( $("#"+TabChild[0].id+"").width() + $("#"+this.GetLastChild().id+"").width()) / 2;

    for ( var a = 1; a < TabChild.length - 1 ; a++ )
    {
      espace = espace +  $("#"+TabChild[a].id+"").width();
    }
  }
  DeltaXH = (( nbrchild - 1) * espaceLeftH + espace ) /2 ;

  return DeltaXH;
},

GetDeltaYH : function(father, espaceTopH)
{
  var plusGrosseBulle = 0;

  for ( z in TabChild)
  {
    if ($("#"+TabChild[z].id+"").height() > plusGrosseBulle )
    {
      plusGrosseBulle = $("#"+TabChild[z].id+"").height();
    }
  }
  DeltaYH = ( ( $("#"+this.GetFather(father).id+"").height() + plusGrosseBulle ) / 2 + espaceTopH );
  return DeltaYH;
},


ChangePositionH : function(father, espaceTopH, espaceLeftH)
{

  for ( j in TabChild )
  {
    TabChild[0].left = this.GetFather(father).left - DeltaXH
    if ( j >= 1)
    {
      TabChild[j].left = TabChild[(j-1)].left + ( $("#"+TabChild[(j-1)].id+"").width() / 2 ) + ( $("#"+TabChild[j].id+"").width() / 2 ) + espaceLeftH;
    }
    TabChild[j].top = this.GetFather(father).top + DeltaYH
  }
  return TabChild;
},


alignH : function(father, espaceLeftH, espaceTopH)
{

  lib.render(elements, "white");

  var TabChild = lib.GetChilds(father);
  var DeltaYH = lib.GetDeltaYH(father, espaceTopH)
  var DeltaXH = lib.GetDeltaXH(espaceLeftH);

  var TabChildPosition = lib.ChangePositionH(father, espaceTopH, espaceLeftH);
  return TabChildPosition;

},






GetDeltaYV : function(espaceTopV)
{
  var espace=0;
  if ( TabChild.length > 0 )
  {
    espace = ( $("#"+TabChild[0].id+"").height() + $("#"+this.GetLastChild().id+"").height()) / 2;
    for ( a = 1; a < TabChild.length -1; a++ )
    {
      espace = espace +  $("#"+TabChild[a].id+"").height();
    }
  }

  DeltaYV = (( TabChild.length - 1) * espaceTopV + espace ) /2 ;
  return DeltaYV;

},


GetDeltaXV : function(father, espaceLeftV)
{
  var plusGrosseBulle = 0;

  for ( z in TabChild)
  {
    if ($("#"+TabChild[z].id+"").width() > plusGrosseBulle )
    {
      plusGrosseBulle = $("#"+TabChild[z].id+"").width();
    }
  }
  DeltaXV = ( ( $("#"+this.GetFather(father).id+"").width() + plusGrosseBulle ) / 2 + espaceLeftV );
  return DeltaXV;
},


ChangePositionV : function(father, espaceTopV, espaceLeftV)
{

  for ( j in TabChild )
  {
    TabChild[0].top = this.GetFather(father).top - DeltaYV
    if ( j >= 1)
    {
      TabChild[j].top = TabChild[(j-1)].top + ( $("#"+TabChild[(j-1)].id+"").height() / 2 ) + ( $("#"+TabChild[j].id+"").height() / 2 ) + espaceTopV;
    }
    TabChild[j].left = this.GetFather(father).left + DeltaXV
  }
  return TabChild;
},


alignV : function(father, espaceTopV, espaceLeftV)
{

  lib.render(elements, "white");

  var TabChild = lib.GetChilds(father);
  var DeltaYV = lib.GetDeltaYV(espaceTopV);
  var DeltaXV = lib.GetDeltaXV(father, espaceLeftV);

  var TabChildPosition = lib.ChangePositionV(father, espaceTopV, espaceLeftV);
  return TabChildPosition;

},


}

</script>
</body>
</html>
